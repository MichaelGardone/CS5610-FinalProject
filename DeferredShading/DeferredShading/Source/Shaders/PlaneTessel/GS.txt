#version 410 core

layout (triangles) in;
layout (triangle_strip, max_vertices = 3) out;

in tes_res
{
	vec3 tangent;
	vec3 bitangent;
	vec3 normal;
	vec2 uvCoord;
} eval[3];

out geo_res
{
	vec3 tangent;
	vec3 bitangent;
	vec3 normal;
	vec2 uvCoord;
} geometry;

in lighting
{
	vec3 tanLightPos;
	vec3 tanViewPos;
	vec3 tanFragPos;
} lightingInfo[3];

out lighting
{
	vec3 tanLightPos;
	vec3 tanViewPos;
	vec3 tanFragPos;
} li;

void main()
{
	for(int i = 0; i < gl_in.length(); i++)
	{
		geometry.tangent = eval[i].tangent;
		geometry.bitangent = eval[i].bitangent;
		geometry.normal = eval[i].normal;
		geometry.uvCoord = eval[i].uvCoord;

		li = lightingInfo[i];

		gl_Position = gl_in[i].gl_Position;

		EmitVertex();
	}

	EndPrimitive();
}
