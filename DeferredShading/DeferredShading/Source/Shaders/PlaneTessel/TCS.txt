#version 410 core
layout (vertices=3) out;

uniform float subdivides;

in vert_res
{
	vec3 tangent;
	vec3 bitangent;
	vec3 normal;
	vec2 uvCoord;
} vert[];

out tcs_res
{
	vec3 tangent;
	vec3 bitangent;
	vec3 normal;
	vec2 uvCoord;
} contrl[];

void main()
{
	// tessalate if we have to
	if(gl_InvocationID == 0)
	{
		float subs = subdivides;

		gl_TessLevelOuter[0] = subs;
		gl_TessLevelOuter[1] = subs;
		gl_TessLevelOuter[2] = subs;
		gl_TessLevelOuter[3] = subs;

		gl_TessLevelInner[0] = subs;
		gl_TessLevelInner[1] = subs;
	}

	contrl[gl_InvocationID].tangent = vert[gl_InvocationID].tangent;
	contrl[gl_InvocationID].bitangent = vert[gl_InvocationID].bitangent;
	contrl[gl_InvocationID].normal = vert[gl_InvocationID].normal;
	contrl[gl_InvocationID].uvCoord = vert[gl_InvocationID].uvCoord;

	gl_out[gl_InvocationID].gl_Position = gl_in[gl_InvocationID].gl_Position;
}